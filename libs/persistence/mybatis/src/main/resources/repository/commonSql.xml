<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.medvedmike.vsu.demo.repository.commonSql">

    <sql id="orderBy">
        <if test="sidx != null and sidx != ''">
            <![CDATA[
            ORDER BY ${sidx} ${sord}
            ]]>
        </if>
    </sql>

    <sql id="pageSupportBegin">
        <![CDATA[
            SELECT x.*, ROW_NUMBER() OVER() AS rnum, COUNT(*) OVER() AS cnt
            FROM (
    ]]>
    </sql>
    <sql id="pageSupportEnd">
        <![CDATA[
            ) x
            OFFSET (#{page} - 1) * #{count}
            LIMIT #{count}
    ]]>
    </sql>

    <sql id="inList">
        <foreach item="item" index="index" collection="list"
                 open="(" separator="," close=")">
            <![CDATA[
            #{item}
        ]]>
        </foreach>
    </sql>

    <sql id="inStringList">
        <foreach item="item" index="index" collection="list"
                 open="(" separator="," close=")">
            <![CDATA[
            UPPER(#{item})
        ]]>
        </foreach>
    </sql>
</mapper>